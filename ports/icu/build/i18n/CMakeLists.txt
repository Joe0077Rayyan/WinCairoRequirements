set(ICU_I18N_SOURCES
  affixpatternparser.cpp
  alphaindex.cpp
  anytrans.cpp
  astro.cpp
  basictz.cpp
  bocsu.cpp
  brktrans.cpp
  buddhcal.cpp
  calendar.cpp
  casetrn.cpp
  cecal.cpp
  chnsecal.cpp
  choicfmt.cpp
  coleitr.cpp
  coll.cpp
  collation.cpp
  collationbuilder.cpp
  collationcompare.cpp
  collationdata.cpp
  collationdatabuilder.cpp
  collationdatareader.cpp
  collationdatawriter.cpp
  collationfastlatin.cpp
  collationfastlatinbuilder.cpp
  collationfcd.cpp
  collationiterator.cpp
  collationkeys.cpp
  collationroot.cpp
  collationrootelements.cpp
  collationruleparser.cpp
  collationsets.cpp
  collationsettings.cpp
  collationtailoring.cpp
  collationweights.cpp
  compactdecimalformat.cpp
  coptccal.cpp
  cpdtrans.cpp
  csdetect.cpp
  csmatch.cpp
  csr2022.cpp
  csrecog.cpp
  csrmbcs.cpp
  csrsbcs.cpp
  csrucode.cpp
  csrutf8.cpp
  curramt.cpp
  currfmt.cpp
  currpinf.cpp
  currunit.cpp
  dangical.cpp
  datefmt.cpp
  dayperiodrules.cpp
  dcfmtsym.cpp
  decContext.cpp
  decNumber.cpp
  decfmtst.cpp
  decimalformatpattern.cpp
  decimfmt.cpp
  decimfmtimpl.cpp
  digitaffix.cpp
  digitaffixesandpadding.cpp
  digitformatter.cpp
  digitgrouping.cpp
  digitinterval.cpp
  digitlst.cpp
  double-conversion-bignum-dtoa.cpp
  double-conversion-bignum.cpp
  double-conversion-cached-powers.cpp
  double-conversion-diy-fp.cpp
  double-conversion-fast-dtoa.cpp
  double-conversion.cpp
  dtfmtsym.cpp
  dtitvfmt.cpp
  dtitvinf.cpp
  dtptngen.cpp
  dtrule.cpp
  esctrn.cpp
  ethpccal.cpp
  fmtable.cpp
  fmtable_cnv.cpp
  format.cpp
  fphdlimp.cpp
  fpositer.cpp
  funcrepl.cpp
  gender.cpp
  gregocal.cpp
  gregoimp.cpp
  hebrwcal.cpp
  indiancal.cpp
  inputext.cpp
  islamcal.cpp
  japancal.cpp
  measfmt.cpp
  measunit.cpp
  measure.cpp
  msgfmt.cpp
  name2uni.cpp
  nfrs.cpp
  nfrule.cpp
  nfsubs.cpp
  nortrans.cpp
  nounit.cpp
  nultrans.cpp
  number_affixutils.cpp
  number_compact.cpp
  number_decimalquantity.cpp
  number_decimfmtprops.cpp
  number_fluent.cpp
  number_formatimpl.cpp
  number_grouping.cpp
  number_integerwidth.cpp
  number_longnames.cpp
  number_modifiers.cpp
  number_notation.cpp
  number_padding.cpp
  number_patternmodifier.cpp
  number_patternstring.cpp
  number_rounding.cpp
  number_scientific.cpp
  number_stringbuilder.cpp
  numfmt.cpp
  numsys.cpp
  olsontz.cpp
  persncal.cpp
  pluralaffix.cpp
  plurfmt.cpp
  plurrule.cpp
  precision.cpp
  quant.cpp
  quantityformatter.cpp
  rbnf.cpp
  rbt.cpp
  rbt_data.cpp
  rbt_pars.cpp
  rbt_rule.cpp
  rbt_set.cpp
  rbtz.cpp
  regexcmp.cpp
  regeximp.cpp
  regexst.cpp
  regextxt.cpp
  region.cpp
  reldatefmt.cpp
  reldtfmt.cpp
  rematch.cpp
  remtrans.cpp
  repattrn.cpp
  rulebasedcollator.cpp
  scientificnumberformatter.cpp
  scriptset.cpp
  search.cpp
  selfmt.cpp
  sharedbreakiterator.cpp
  simpletz.cpp
  smallintformatter.cpp
  smpdtfmt.cpp
  smpdtfst.cpp
  sortkey.cpp
  standardplural.cpp
  strmatch.cpp
  strrepl.cpp
  stsearch.cpp
  taiwncal.cpp
  timezone.cpp
  titletrn.cpp
  tmunit.cpp
  tmutamt.cpp
  tmutfmt.cpp
  tolowtrn.cpp
  toupptrn.cpp
  translit.cpp
  transreg.cpp
  tridpars.cpp
  tzfmt.cpp
  tzgnames.cpp
  tznames.cpp
  tznames_impl.cpp
  tzrule.cpp
  tztrans.cpp
  ucal.cpp
  ucln_in.cpp
  ucol.cpp
  ucol_res.cpp
  ucol_sit.cpp
  ucoleitr.cpp
  ucsdet.cpp
  udat.cpp
  udateintervalformat.cpp
  udatpg.cpp
  ufieldpositer.cpp
  uitercollationiterator.cpp
  ulocdata.cpp
  umsg.cpp
  unesctrn.cpp
  uni2name.cpp
  unum.cpp
  unumsys.cpp
  upluralrules.cpp
  uregex.cpp
  uregexc.cpp
  uregion.cpp
  usearch.cpp
  uspoof.cpp
  uspoof_build.cpp
  uspoof_conf.cpp
  uspoof_impl.cpp
  utf16collationiterator.cpp
  utf8collationiterator.cpp
  utmscale.cpp
  utrans.cpp
  valueformatter.cpp
  visibledigits.cpp
  vtzone.cpp
  vzone.cpp
  windtfmt.cpp
  winnmfmt.cpp
  wintzimpl.cpp
  zonemeta.cpp
  zrule.cpp
  ztrans.cpp
)

add_library(icuin ${ICU_I18N_SOURCES})
target_include_directories(icuin PRIVATE
  ${CMAKE_SOURCE_DIR}/common
  ${CMAKE_CURRENT_SOURCE_DIR}
)
target_compile_definitions(icuin PRIVATE
  U_I18N_IMPLEMENTATION
  ${ICU_DEFINITIONS}
)
set_target_properties(icuin PROPERTIES
  RUNTIME_OUTPUT_NAME icuin${ICU_MAJOR_VERSION}
  COMPILE_FLAGS ${RTTI_FLAG}
)
target_link_libraries(icuin icuuc)

# Install
file(GLOB ICU_I18N_PUBLIC_HEADERS unicode/*.h)

install(
  FILES ${ICU_I18N_PUBLIC_HEADERS}
  DESTINATION ${CMAKE_INSTALL_INCLUDEDIR}/unicode
)

install(
  TARGETS icuin
  ARCHIVE DESTINATION ${CMAKE_INSTALL_LIBDIR}
  LIBRARY DESTINATION ${CMAKE_INSTALL_LIBDIR}
  RUNTIME DESTINATION ${CMAKE_INSTALL_BINDIR}
)
