From 2591960e2fc9aef919b010224a221f92a20da3d1 Mon Sep 17 00:00:00 2001
From: Don <don.j.olmstead@gmail.com>
Date: Wed, 6 Feb 2019 10:26:30 -0800
Subject: [PATCH] Fix library install destination

Currently nghttp2 will install the dynamic and static targets into the lib
directory. This puts them in the location expected by vcpkg.
---
 lib/CMakeLists.txt | 4 +++-
 src/CMakeLists.txt | 4 +++-
 2 files changed, 6 insertions(+), 2 deletions(-)

diff --git a/lib/CMakeLists.txt b/lib/CMakeLists.txt
index 2228a5d7..c27ee99b 100644
--- a/lib/CMakeLists.txt
+++ b/lib/CMakeLists.txt
@@ -51,7 +51,9 @@ if(ENABLE_SHARED_LIB)
   )
 
   install(TARGETS nghttp2
-    DESTINATION "${CMAKE_INSTALL_LIBDIR}")
+    ARCHIVE DESTINATION "${CMAKE_INSTALL_LIBDIR}"
+    LIBRARY DESTINATION "${CMAKE_INSTALL_LIBDIR}"
+    RUNTIME DESTINATION "${CMAKE_INSTALL_BINDIR}")
 endif()
 
 if(HAVE_CUNIT OR ENABLE_STATIC_LIB)
diff --git a/src/CMakeLists.txt b/src/CMakeLists.txt
index f33f4bff..b4e32a3b 100644
--- a/src/CMakeLists.txt
+++ b/src/CMakeLists.txt
@@ -263,7 +263,9 @@ if(ENABLE_ASIO_LIB)
     VERSION 1.0.0 SOVERSION 1)
 
   install(TARGETS nghttp2_asio
-    DESTINATION "${CMAKE_INSTALL_LIBDIR}")
+    ARCHIVE DESTINATION "${CMAKE_INSTALL_LIBDIR}"
+    LIBRARY DESTINATION "${CMAKE_INSTALL_LIBDIR}"
+    RUNTIME DESTINATION "${CMAKE_INSTALL_BINDIR}")
 
   install(FILES "${CMAKE_CURRENT_BINARY_DIR}/libnghttp2_asio.pc"
     DESTINATION "${CMAKE_INSTALL_LIBDIR}/pkgconfig")
-- 
2.19.1.windows.1

